include "stdtest.ph";

var g = 0;

class foo
{
    func new(z:std.int) ... x(z) { g = g + 1; }
    func delete(){ g = g - 1; }

    var x:std.int;
}

class bar
{
    func new() ... a(123), b(321) { }
    func delete(){ }

    var a:foo;
    var b:foo;
}

class woo
{
    func new(){ }
    func delete(){ }

    var x:bar;
    var y:bar;
}

func main()
{
    {
        var a:woo;

        test.assert(g == 4);
    }

    test.assert(g == 0);
}
