include("stdtest.ph");

class foo
{
    func new(a:ref std.int) ... x(a) { test.assert(a == 123); }
    func delete(){ }

    var x:ref std.int;
}

func main()
{
    var a = 123;
    var f:foo(a);

    test.assert(f.x == 123);

    f.x = 321;

    test.assert(a == 321);
}
