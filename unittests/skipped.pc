include("stdtest.ph", "stdios.ph");

var n = 0;

class foo
{
public:
    func new(a:std.bool) ... a(a) { ++n; }
    func new(a:const ref foo) ... a(a.a) { ++n; }

    func operator std.bool() const { return a; }

    var a:std.bool;
}

func main()
{
    foo(false) || foo(true);

    test.assert(n == 2);

    n = 0;
    foo(false) && foo(true);

    test.assert(n == 1);

    n = 0;
    var a = true ? foo(true) : foo(false);
    test.assert(n == 2);
}
